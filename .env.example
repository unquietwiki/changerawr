# Environment variables declared in this file are automatically made available to Prisma.
# See the documentation for more detail: https://pris.ly/d/prisma-schema#accessing-environment-variables-from-the-schema

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

DATABASE_URL="postgresql://postgres@localhost:5432/changerawr?schema=public"
JWT_ACCESS_SECRET=""
NEXT_PUBLIC_APP_URL="http://localhost:3000"
GITHUB_ENCRYPTION_KEY="" #  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# EASYPANEL_PROJECT_ID used for automatic updates if using Easypanel
# EASYPANEL_SERVICE_ID used for automatic updates if using Easypanel
# EASYPANEL_PANEL_URL
# EASYPANEL_API_KEY
CHR_EPOA2_SERV_URL=""# oauth2 server URL ( no "/" )
CHR_EPOA2_SERV_API_KEY="" # oauth2 server API key
ANALYTICS_SALT=your-secure-random-salt-here

ENABLE_JOB_RUNNER # on development, this must be true if you want to work with scheduled jobs.

NEXT_PUBLIC_ENABLE_CUM # set this to false to disable the Changerawr Universal Markdown engine in the editor. It will still render elements, you just will not have the built-in toolset of CUM.

NEXT_PUBLIC_SHOW_WWC_TOOLING # set this to true to enable all tooling

SHOW_TELEMETRY_LOGS # set this to true if debugging telemetry, used internally so do not touch this unless you absolutely know what you are doing

# Comma-separated list of additional external domains allowed in middleware (e.g., "example.com,cdn.example.net")
# Default allowed domains: cloudflareinsights.com, cdnjs.cloudflare.com, unpkg.com, cdn.jsdelivr.net, fonts.googleapis.com, fonts.gstatic.com
ALLOWED_EXTERNAL_DOMAINS=""

# Set to true after initial setup is complete to avoid excessive API calls in middleware
# IMPORTANT: Add this to your .env file after completing the setup wizard and restart the service
SETUP_COMPLETE=false

# Set if changerawr should not use secure cookies at all, and not at all for only specific domains
COOKIE_SECURE ## false/true
COOKIE_SECURE_DOMAINS ## same as ALLOWED_EXTERNAL_DOMAINS

# ============================================================================
# SSL Certificate Management & nginx-agent Integration
# ============================================================================
# These settings are optional and only needed if you're using custom domains
# with SSL certificates and the chr-nginx-agent sidecar for automatic nginx
# configuration and certificate management.
#
# If you don't need SSL certificates or custom domains, you can leave these
# variables unset or commented out.
# ============================================================================

# Enable SSL certificate management UI in the dashboard
# Set to 'true' to show SSL certificate options in domain settings
NEXT_PUBLIC_SSL_ENABLED=false

# nginx-agent webhook configuration
# URL where the chr-nginx-agent sidecar is running
# The agent receives webhook notifications when certificates are issued/renewed
NGINX_AGENT_URL=http://localhost:7842

# Shared secret for signing webhook payloads to nginx-agent
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: Must match the AGENT_SECRET in your nginx-agent configuration
NGINX_AGENT_SECRET=

# Internal API authentication secret
# Used by nginx-agent to securely fetch certificate files via /api/internal/cert/[domain]
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: Must match the INTERNAL_API_SECRET in your nginx-agent configuration
INTERNAL_API_SECRET=

# ACME (Let's Encrypt) configuration
# Email address for Let's Encrypt account registration and notifications
ACME_EMAIL=admin@example.com

# Use Let's Encrypt staging environment for testing (avoids rate limits)
# Set to 'true' for development/testing, 'false' for production
ACME_STAGING=true

# ACME sandbox mode for testing (development only)
# Set to 'true' to use sandbox mode - simulates the full SSL process without actually issuing certificates
# This allows testing the entire flow (challenges, validation, webhooks) without hitting rate limits
# IMPORTANT: nginx-agent must also be in sandbox mode for this to work correctly
ACME_SANDBOX_MODE=false

# ============================================================================
# SSL Auto-Renewal Configuration (Optional)
# ============================================================================
# Automatic renewal of SSL certificates before they expire.
# See lib/custom-domains/ssl/cron-setup.md for detailed setup instructions.
# ============================================================================

# Number of days before expiry to trigger auto-renewal (default: 30)
# Certificates with less than this many days remaining will be renewed automatically
SSL_RENEWAL_THRESHOLD_DAYS=30

# Maximum number of certificates to renew per cron job run (default: 10)
# Prevents overwhelming the system with too many concurrent renewals
SSL_RENEWAL_BATCH_SIZE=10

# Encryption key
# Used by custom-domains and nginx-agent for handshakes.
# Generate with: fhq1DDp3Gnq/jPLhEQYAeK9IFuBe9U/KAi+LqJLs8KQ=
ENCRYPTION_KEY=""